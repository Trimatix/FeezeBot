import discord
import io
import random
import os
from discord import app_commands
from discord.ext.commands import Bot

intents = discord.Intents.default()
intents.message_content = True
intents.members = True
client = discord.ext.commands.Bot(intents=intents)

@client.event
async def on_ready():
    print(f'Feeze Bot Initialization Complete')

@client.tree.command()
async def hello(interaction: discord.Interaction):
    await interaction.response.send_message(f'Hi, {interaction.user.mention}')

@client.event
async def on_message(message):
    if message.content == "freeze":
        arr = os.listdir('/home/jeremy/Freeze Bot/freezes')
        rando = random.randint(0,1276)
        randomfreeze = arr[rando]
        rando = str(rando)
        with open(f'/home/jeremy/Freeze Bot/freezes/{randomfreeze}', 'rb') as image:
            with io.BytesIO(image.read()) as imageBytes:
                imageBytes.seek(0)
                imageFile = discord.File(imageBytes, filename="freeze.jpg")
                await message.channel.send(f'**{rando}**', file=imageFile)

    if message.content == 'shut' and message.author.id == 697905630391959572:
        await client.close()

client.run('TOKEN')
